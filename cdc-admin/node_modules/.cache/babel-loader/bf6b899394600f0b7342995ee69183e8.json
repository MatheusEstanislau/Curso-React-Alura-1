{"ast":null,"code":"var _jsxFileName = \"/home/matheus/Documentos/Curso React 1/Curso-React-Alura-1/cdc-admin/src/Livro.js\";\nimport $ from \"jquery\";\nimport InputCustomizado from \"./componentes/InputCustomizado\";\nimport React, { Component } from 'react';\nimport PubSub from 'pubsub-js';\nimport TratadorErros from './TratadorErros';\n\nclass FormularioLivro extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      titulo: '',\n      preco: '',\n      autorId: ''\n    };\n    this.setTitulo = this.setTitulo.bind(this);\n    this.setPreco = this.setPreco.bind(this);\n    this.setAutorId = this.setAutorId.bind(this);\n    this.handleLivroSubmit = this.handleLivroSubmit.bind(this);\n  }\n\n  setTitulo(e) {\n    this.setState({\n      titulo: e.target.value\n    });\n  }\n\n  setPreco(e) {\n    this.setState({\n      preco: e.target.value\n    });\n  }\n\n  setAutorId(e) {\n    this.setState({\n      autorId: e.target.value\n    });\n  }\n\n  handleLivroSubmit(e) {\n    e.preventDefault();\n    var titulo = this.state.titulo.trim();\n    var preco = this.state.preco.trim();\n    var autorId = this.state.autorId;\n    $.ajax({\n      url: 'http://localhost:8080/api/livros',\n      contentType: 'application/json',\n      dataType: 'json',\n      type: 'POST',\n      data: JSON.stringify({\n        titulo: titulo,\n        preco: preco,\n        autorId: autorId\n      }),\n      success: function (novaListagem) {\n        PubSub.publish('atualiza-lista-livros', novaListagem);\n        this.setState({\n          titulo: '',\n          preco: '',\n          autorId: ''\n        });\n      }.bind(this),\n      error: function (resposta) {\n        if (resposta.status === 400) {\n          new TratadorErros().publicaErros(resposta.responseJSON);\n        }\n      },\n      beforeSend: function () {\n        PubSub.publish(\"limpa-erros\", {});\n      }\n    });\n    this.setState({\n      titulo: '',\n      preco: '',\n      autorId: ''\n    });\n  }\n\n  render() {\n    var autores = this.props.autores.map(function (autor) {\n      return React.createElement(\"option\", {\n        key: autor.id,\n        value: autor.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, autor.nome);\n    });\n    return React.createElement(\"div\", {\n      className: \"autorForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"pure-form pure-form-aligned\",\n      onSubmit: this.handleLivroSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(InputCustomizado, {\n      id: \"titulo\",\n      name: \"titulo\",\n      label: \"Titulo: \",\n      type: \"text\",\n      value: this.state.titulo,\n      placeholder: \"Titulo do livro\",\n      onChange: this.setTitulo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(InputCustomizado, {\n      id: \"preco\",\n      name: \"preco\",\n      label: \"Preco: \",\n      type: \"decimal\",\n      value: this.state.preco,\n      placeholder: \"Pre\\xE7o do livro\",\n      onChange: this.setPreco,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"pure-controls\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      value: this.state.autorId,\n      name: \"autorId\",\n      onChange: this.setAutorId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Selecione\"), autores)), React.createElement(\"div\", {\n      className: \"pure-control-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"pure-button pure-button-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Gravar\"))));\n  }\n\n}\n\nclass TabelaLivros extends Component {\n  render() {\n    var livros = this.props.lista.map(function (livro) {\n      return React.createElement(\"tr\", {\n        key: livro.titulo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, livro.titulo), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, livro.autor.nome), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, livro.preco));\n    });\n    return React.createElement(\"table\", {\n      className: \"pure-table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Titulo\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Autor\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Preco\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, livros));\n  }\n\n}\n\nexport default class LivroBox extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lista: [],\n      autores: []\n    };\n  }\n\n  componentDidMount() {\n    $.ajax({\n      url: \"http://localhost:8080/api/livros\",\n      dataType: 'json',\n      success: function (data) {\n        this.setState({\n          lista: data\n        });\n      }.bind(this)\n    });\n    $.ajax({\n      url: \"http://localhost:8080/api/autores\",\n      dataType: 'json',\n      success: function (data) {\n        this.setState({\n          autores: data\n        });\n      }.bind(this)\n    });\n    PubSub.subscribe('atualiza-lista-livros', function (topicName, lista) {\n      this.setState({\n        lista: lista\n      });\n    }.bind(this));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"Cadastro de Livros\")), React.createElement(\"div\", {\n      className: \"content\",\n      id: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(FormularioLivro, {\n      autores: this.state.autores,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(TabelaLivros, {\n      lista: this.state.lista,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/home/matheus/Documentos/Curso React 1/Curso-React-Alura-1/cdc-admin/src/Livro.js"],"names":["$","InputCustomizado","React","Component","PubSub","TratadorErros","FormularioLivro","constructor","props","state","titulo","preco","autorId","setTitulo","bind","setPreco","setAutorId","handleLivroSubmit","e","setState","target","value","preventDefault","trim","ajax","url","contentType","dataType","type","data","JSON","stringify","success","novaListagem","publish","error","resposta","status","publicaErros","responseJSON","beforeSend","render","autores","map","autor","id","nome","TabelaLivros","livros","lista","livro","LivroBox","componentDidMount","subscribe","topicName"],"mappings":"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","sourcesContent":["import $ from \"jquery\";\nimport InputCustomizado from \"./componentes/InputCustomizado\"\nimport React, { Component } from 'react';\nimport PubSub from 'pubsub-js';\nimport TratadorErros from './TratadorErros'\n\nclass FormularioLivro extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {titulo: '', preco: '', autorId: ''};\n    this.setTitulo = this.setTitulo.bind(this);\n    this.setPreco = this.setPreco.bind(this);\n    this.setAutorId = this.setAutorId.bind(this);   \n    this.handleLivroSubmit = this.handleLivroSubmit.bind(this);\n  }\n  \n  setTitulo(e) {\n    this.setState({titulo: e.target.value});\n  }\n\n  setPreco(e) {\n    this.setState({preco: e.target.value});\n  }\n\n  setAutorId(e) {\n    this.setState({autorId: e.target.value});\n  }\n  \n  \n  handleLivroSubmit(e) {\n    e.preventDefault();\n    var titulo = this.state.titulo.trim();\n    var preco = this.state.preco.trim();\n    var autorId = this.state.autorId;\n\n    $.ajax({\n      url: 'http://localhost:8080/api/livros',\n      contentType: 'application/json',\n      dataType: 'json',\n      type: 'POST',\n      data: JSON.stringify({titulo:titulo,preco:preco,autorId:autorId}),\n      success: function(novaListagem) {\n          PubSub.publish( 'atualiza-lista-livros',novaListagem);            \n          this.setState({titulo:'',preco:'',autorId:''});\n      }.bind(this),\n      error: function(resposta){\n        if(resposta.status === 400){\n          new TratadorErros().publicaErros(resposta.responseJSON);\n        }\n      },\n      beforeSend: function(){\n        PubSub.publish(\"limpa-erros\",{});\n      }            \n    });  \n    \n    this.setState({titulo: '', preco: '', autorId: ''});\n  }\n  \n  render() {\n    var autores = this.props.autores.map(function(autor){\n      return <option key={autor.id} value={autor.id}>{autor.nome}</option>;\n    });\n    return (\n      <div className=\"autorForm\">\n        <form className=\"pure-form pure-form-aligned\" onSubmit={this.handleLivroSubmit}>\n          <InputCustomizado id=\"titulo\" name=\"titulo\" label=\"Titulo: \" type=\"text\" value={this.state.titulo} placeholder=\"Titulo do livro\" onChange={this.setTitulo} />\n          <InputCustomizado id=\"preco\" name=\"preco\" label=\"Preco: \" type=\"decimal\" value={this.state.preco} placeholder=\"Preço do livro\" onChange={this.setPreco} />\n          <div className=\"pure-controls\">\n            <select value={this.state.autorId} name=\"autorId\" onChange={this.setAutorId}>\n              <option value=\"\">Selecione</option>\n              {autores}\n            </select>\n          </div>\n          <div className=\"pure-control-group\">                                  \n            <label></label> \n            <button type=\"submit\" className=\"pure-button pure-button-primary\">Gravar</button>                                    \n          </div>          \n        </form>             \n      </div>\n    );\n  }\n} \n\nclass TabelaLivros extends Component {\n  \n  render() {\n    var livros = this.props.lista.map(function(livro){\n      return(\n          <tr key={livro.titulo}>\n            <td>{livro.titulo}</td>\n            <td>{livro.autor.nome}</td>\n            <td>{livro.preco}</td>\n          </tr>\n        );\n      });\n    return(\n      <table className=\"pure-table\">\n        <thead>\n          <tr>\n            <th>Titulo</th>\n            <th>Autor</th>\n            <th>Preco</th>\n          </tr>\n        </thead>\n        <tbody>\n          {livros}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nexport default class LivroBox extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {lista : [],autores:[]};\n  }\n\n  componentDidMount() {\n    $.ajax({\n      url: \"http://localhost:8080/api/livros\",\n      dataType: 'json',\n      success: function(data) {\n        this.setState({lista: data});\n      }.bind(this)\n    });\n    \n    $.ajax({\n      url: \"http://localhost:8080/api/autores\",\n      dataType: 'json',\n      success: function(data) {\n        this.setState({autores: data});\n      }.bind(this)\n    });\n\n    PubSub.subscribe('atualiza-lista-livros', function(topicName,lista){\n      this.setState({lista:lista});\n    }.bind(this));    \n  }\n\n\n  render() {\n    return(\n      <div>\n        <div className=\"header\">\n          <h1>Cadastro de Livros</h1>\n        </div>\n        <div className=\"content\" id=\"content\">\n          <FormularioLivro autores={this.state.autores}/>\n          <TabelaLivros lista={this.state.lista}/>\n        </div>\n      </div>\n    );\n  }\n} "]},"metadata":{},"sourceType":"module"}