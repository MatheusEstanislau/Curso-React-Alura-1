{"ast":null,"code":"var _jsxFileName = \"/home/matheus/Documentos/Curso React 1/Curso-React-Alura-1/cdc-admin/src/Livro.js\";\nimport React, { Component } from 'react';\nimport PubSub from 'pubsub-js';\nimport TratadorErros from './TratadorErros';\nimport InputCustomizado from './componentes/InputCustomizado';\nimport BotaoSubmitCustomizado from './componentes/BotaoSubmitCustomizado';\nimport $ from 'jquery';\n\nclass FormularioLivro extends Component {\n  constructor() {\n    super();\n    this.state = {\n      titulo: '',\n      preco: '',\n      autorID: ''\n    };\n    this.enviaForm = this.enviaForm.bind(this);\n    this.setTitulo = this.setTitulo.bind(this);\n    this.setPreco = this.setPreco.bind(this);\n    this.setAutorID = this.setAutorID.bind(this);\n  }\n\n  enviaForm(evento) {\n    evento.preventDefault();\n    $.ajax({\n      url: 'http://localhost:8080/api/livros',\n      contentType: 'application/json',\n      dataType: 'json',\n      type: 'post',\n      data: JSON.stringify({\n        titulo: this.state.titulo,\n        preco: this.state.preco,\n        autorID: this.state.autorID\n      }),\n      success: function (novaLista) {\n        PubSub.publish('atualiza-lista-livros', novaLista);\n        this.setState({\n          titulo: '',\n          preco: '',\n          autorID: ''\n        });\n      }.bind(this),\n      error: function (resposta) {\n        if (resposta.status === 400) {\n          new TratadorErros().publicaErros(resposta.responseJSON);\n        }\n\n        ;\n      },\n      beforeSend: function () {\n        PubSub.publish(\"limpa-erros\", {});\n      }\n    });\n  }\n\n  setTitulo(evento) {\n    this.setState({\n      titulo: evento.target.value\n    });\n  }\n\n  setPreco(evento) {\n    this.setState({\n      preco: evento.target.value\n    });\n  }\n\n  setAutorID(evento) {\n    this.setState({\n      autorID: evento.target.value\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"pure-form pure-form-aligned\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"pure-form pure-form-aligned\",\n      onSubmit: this.enviaForm,\n      method: \"post\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(InputCustomizado, {\n      id: \"titulo\",\n      type: \"text\",\n      name: \"titulo\",\n      value: this.state.titulo,\n      onChange: this.setTitulo,\n      label: \"T\\xEDtulo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }), React.createElement(InputCustomizado, {\n      id: \"preco\",\n      type: \"text\",\n      name: \"preco\",\n      value: this.state.preco,\n      onChange: this.setPreco,\n      label: \"Pre\\xE7o\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }), React.createElement(InputCustomizado, {\n      id: \"autorID\",\n      type: \"text\",\n      name: \"autorID\",\n      value: this.state.autorID,\n      onChange: this.setAutorID,\n      label: \"Autor\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(BotaoSubmitCustomizado, {\n      label: \"Gravar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    })));\n  }\n\n}\n\nclass TabelaLivros extends Component {\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"pure-table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Titulo\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Pre\\xE7o\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Autor\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, this.props.lista.map(function (livro) {\n      return React.createElement(\"tr\", {\n        key: livro.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, livro.titulo), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, livro.preco), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, livro.autor.nome));\n    }))));\n  }\n\n}\n\nexport default class LivroBox extends Component {\n  constructor() {\n    super();\n    this.state = {\n      lista: []\n    };\n  }\n\n  componentDidMount() {\n    $.ajax({\n      url: \"http://localhost:8080/api/livros\",\n      dataType: 'json',\n      success: function (resposta) {\n        this.setState({\n          lista: resposta\n        });\n      }.bind(this)\n    });\n    PubSub.subscribe('atualiza-lista-livros', function (topico, novaLista) {\n      this.setState({\n        lista: novaLista\n      });\n    }.bind(this));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(FormularioLivro, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(TabelaLivros, {\n      lista: this.state.lista,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/matheus/Documentos/Curso React 1/Curso-React-Alura-1/cdc-admin/src/Livro.js"],"names":["React","Component","PubSub","TratadorErros","InputCustomizado","BotaoSubmitCustomizado","$","FormularioLivro","constructor","state","titulo","preco","autorID","enviaForm","bind","setTitulo","setPreco","setAutorID","evento","preventDefault","ajax","url","contentType","dataType","type","data","JSON","stringify","success","novaLista","publish","setState","error","resposta","status","publicaErros","responseJSON","beforeSend","target","value","render","TabelaLivros","props","lista","map","livro","id","autor","nome","LivroBox","componentDidMount","subscribe","topico"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PubSub from 'pubsub-js';\nimport TratadorErros from './TratadorErros';\nimport InputCustomizado from './componentes/InputCustomizado';\nimport BotaoSubmitCustomizado from './componentes/BotaoSubmitCustomizado';\nimport $ from 'jquery';\n\nclass FormularioLivro extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = { titulo: '', preco: '', autorID: '' };\n\t\tthis.enviaForm = this.enviaForm.bind(this);\n\t\tthis.setTitulo = this.setTitulo.bind(this);\n\t\tthis.setPreco = this.setPreco.bind(this);\n\t\tthis.setAutorID = this.setAutorID.bind(this);\n\t}\n\tenviaForm(evento) {\n\t\tevento.preventDefault();\n\t\t$.ajax({\n\t\t\turl: 'http://localhost:8080/api/livros',\n\t\t\tcontentType: 'application/json',\n\t\t\tdataType: 'json',\n\t\t\ttype: 'post',\n\t\t\tdata: JSON.stringify({ titulo: this.state.titulo, preco: this.state.preco, autorID: this.state.autorID }),\n\t\t\tsuccess: function (novaLista) {\n\t\t\t\tPubSub.publish('atualiza-lista-livros', novaLista);\n\t\t\t\tthis.setState({ titulo: '', preco: '', autorID: '' });\n\t\t\t}.bind(this),\n\t\t\terror: function (resposta) {\n\t\t\t\tif (resposta.status === 400) {\n\t\t\t\t\tnew TratadorErros().publicaErros(resposta.responseJSON);\n\t\t\t\t};\n\t\t\t},\n\t\t\tbeforeSend: function () {\n\t\t\t\tPubSub.publish(\"limpa-erros\", {})\n\t\t\t}\n\t\t});\n\t}\n\n\tsetTitulo(evento) {\n\t\tthis.setState({ titulo: evento.target.value });\n\t}\n\n\tsetPreco(evento) {\n\t\tthis.setState({ preco: evento.target.value });\n\t}\n\n\tsetAutorID(evento) {\n\t\tthis.setState({ autorID: evento.target.value });\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"pure-form pure-form-aligned\">\n\t\t\t\t<form className=\"pure-form pure-form-aligned\" onSubmit={this.enviaForm} method=\"post\">\n\t\t\t\t\t<InputCustomizado id=\"titulo\" type=\"text\" name=\"titulo\" value={this.state.titulo} onChange={this.setTitulo} label=\"Título\" />\n\t\t\t\t\t<InputCustomizado id=\"preco\" type=\"text\" name=\"preco\" value={this.state.preco} onChange={this.setPreco} label=\"Preço\" />\n\t\t\t\t\t<InputCustomizado id=\"autorID\" type=\"text\" name=\"autorID\" value={this.state.autorID} onChange={this.setAutorID} label=\"Autor\" />\n\t\t\t\t\t<BotaoSubmitCustomizado label=\"Gravar\" />\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass TabelaLivros extends Component {\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<table className=\"pure-table\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Titulo</th>\n\t\t\t\t\t\t\t<th>Preço</th>\n\t\t\t\t\t\t\t<th>Autor</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.props.lista.map(function (livro) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<tr key={livro.id}>\n\t\t\t\t\t\t\t\t\t\t<td>{livro.titulo}</td>\n\t\t\t\t\t\t\t\t\t\t<td>{livro.preco}</td>\n\t\t\t\t\t\t\t\t\t\t<td>{livro.autor.nome}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nexport default class LivroBox extends Component {\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = { lista: [] };\n\t}\n\n\tcomponentDidMount() {\n\t\t$.ajax({\n\t\t\turl: \"http://localhost:8080/api/livros\",\n\t\t\tdataType: 'json',\n\t\t\tsuccess: function (resposta) {\n\t\t\t\tthis.setState({ lista: resposta });\n\t\t\t}.bind(this)\n\t\t}\n\t\t);\n\t\tPubSub.subscribe('atualiza-lista-livros', function (topico, novaLista) {\n\t\t\tthis.setState({ lista: novaLista });\n\t\t}.bind(this));\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<FormularioLivro />\n\t\t\t\t<TabelaLivros lista={this.state.lista} />\n\t\t\t</div>\n\t\t);\n\t}\n}"]},"metadata":{},"sourceType":"module"}